<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Twin - Sistem Cerdas Manajemen Iklim Mikro Gedung Arsip</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header Section -->
        <header>
            <div class="logo">
                <img src="img/digital-twin-logo.svg" alt="Logo Digital Twin">
                <h1>Digital Twin Gedung Arsip</h1>
            </div>
            <div class="header-right">
                <div class="current-time" id="current-time">19 Mei 2025 | 14:30:45</div>
                <div class="user-profile">
                    <span>Admin</span>
                    <img src="img/user-avatar.png" alt="User Avatar">
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main>
            <!-- Dashboard Overview -->
            <section class="dashboard-grid">
                <!-- Building Overview -->
                <div class="card building-view">
                    <h2>Visualisasi Digital Twin</h2>
                    <div class="model-container">
                        <div id="building-model"></div>
                        <div class="model-controls">
                            <button id="rotate-left"><img src="img/icons/rotate-left.svg" alt="Rotate Left"></button>
                            <button id="zoom-in"><img src="img/icons/zoom-in.svg" alt="Zoom In"></button>
                            <button id="zoom-out"><img src="img/icons/zoom-out.svg" alt="Zoom Out"></button>
                            <button id="rotate-right"><img src="img/icons/rotate-right.svg" alt="Rotate Right"></button>
                            <button id="reset-view"><img src="img/icons/reset.svg" alt="Reset View"></button>
                        </div>
                        <div class="floor-selector">
                            <button class="floor-btn active" data-floor="G">Lantai G</button>
                            <button class="floor-btn" data-floor="F">Lantai F</button>
                        </div>
                    </div>
                </div>

                <!-- Current Environmental Status -->
                <div class="card environmental-status">
                    <h2>Status Iklim Mikro</h2>
                    <div class="status-grid">
                        <div class="status-card">
                            <div class="status-icon temperature"></div>
                            <div class="status-details">
                                <h3>Suhu Rata-rata</h3>
                                <div class="status-value" id="avg-temperature">22.5°C</div>
                                <div class="status-range">Min: <span id="min-temperature">19.2°C</span> | Max: <span id="max-temperature">24.8°C</span></div>
                            </div>
                        </div>
                        <div class="status-card">
                            <div class="status-icon humidity"></div>
                            <div class="status-details">
                                <h3>Kelembapan Rata-rata</h3>
                                <div class="status-value" id="avg-humidity">48%</div>
                                <div class="status-range">Min: <span id="min-humidity">42%</span> | Max: <span id="max-humidity">53%</span></div>
                            </div>
                        </div>
                        <div class="status-card">
                            <div class="status-icon external"></div>
                            <div class="status-details">
                                <h3>Cuaca Eksternal (BMKG)</h3>
                                <div class="status-value weather-status" id="weather-status">Cerah Berawan</div>
                                <div class="weather-details" id="external-temperature">Suhu Luar: 29.8°C</div>
                            </div>
                        </div>
                        <div class="status-card">
                            <div class="status-icon health"></div>
                            <div class="status-details">
                                <h3>Status Kesehatan Sistem</h3>
                                <div class="status-value health-status" id="system-health">Optimal</div>
                                <div class="health-details">Perangkat Aktif: <span id="active-devices">12/12</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Critical Alerts -->
                <div class="card alerts">
                    <div class="card-header">
                        <h2>Peringatan & Rekomendasi</h2>
                        <div class="alert-filter">
                            <select id="alert-filter">
                                <option value="all">Semua</option>
                                <option value="critical">Kritis</option>
                                <option value="warning">Peringatan</option>
                                <option value="normal">Normal</option>
                            </select>
                        </div>
                    </div>
                    <div class="alerts-container" id="alerts-container">
                        <div class="alert-item critical">
                            <div class="alert-icon"></div>
                            <div class="alert-content">
                                <div class="alert-title">Kelembapan Terlalu Tinggi - G7</div>
                                <div class="alert-description">Kelembapan mencapai 68%. Direkomendasikan untuk mengaktifkan dehumidifier segera.</div>
                                <div class="alert-time">14:15:22</div>
                            </div>
                            <div class="alert-actions">
                                <button class="action-btn">Tindak Lanjut</button>
                                <button class="action-btn">Abaikan</button>
                            </div>
                        </div>
                        <div class="alert-item warning">
                            <div class="alert-icon"></div>
                            <div class="alert-content">
                                <div class="alert-title">Suhu di Atas Optimal - F4</div>
                                <div class="alert-description">Suhu naik menjadi 23.8°C. Direkomendasikan untuk menyesuaikan pengaturan AC.</div>
                                <div class="alert-time">14:02:45</div>
                            </div>
                            <div class="alert-actions">
                                <button class="action-btn">Tindak Lanjut</button>
                                <button class="action-btn">Abaikan</button>
                            </div>
                        </div>
                        <div class="alert-item normal">
                            <div class="alert-icon"></div>
                            <div class="alert-content">
                                <div class="alert-title">Prediksi Cuaca - 3 Jam Mendatang</div>
                                <div class="alert-description">Prakiraan hujan dalam 3 jam ke depan. Kemungkinan peningkatan kelembapan di ruang G2-G5.</div>
                                <div class="alert-time">13:45:11</div>
                            </div>
                            <div class="alert-actions">
                                <button class="action-btn">Lihat Prediksi</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Trend Analysis -->
                <div class="card trends">
                    <div class="card-header">
                        <h2>Analisis Tren</h2>
                        <div class="trend-controls">
                            <div class="trend-period">
                                <button class="period-btn active" data-period="24h">24 Jam</button>
                                <button class="period-btn" data-period="7d">7 Hari</button>
                                <button class="period-btn" data-period="30d">30 Hari</button>
                            </div>
                            <div class="trend-type">
                                <select id="trend-location">
                                    <option value="all">Semua Lokasi</option>
                                    <option value="f-floor">Lantai F</option>
                                    <option value="g-floor">Lantai G</option>
                                    <option value="specific">Lokasi Spesifik</option>
                                </select>
                                <select id="trend-parameter">
                                    <option value="temperature">Suhu</option>
                                    <option value="humidity">Kelembapan</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="trend-chart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Room-specific Data -->
            <section class="room-details-section">
                <div class="section-header">
                    <h2>Detail Ruangan</h2>
                    <div class="room-selector">
                        <select id="room-selector">
                            <option value="">Pilih Ruangan...</option>
                            <optgroup label="Lantai F">
                                <option value="F2">F2</option>
                                <option value="F3">F3</option>
                                <option value="F4">F4</option>
                                <option value="F5">F5</option>
                                <option value="F6">F6</option>
                            </optgroup>
                            <optgroup label="Lantai G">
                                <option value="G2">G2</option>
                                <option value="G3">G3</option>
                                <option value="G4">G4</option>
                                <option value="G5">G5</option>
                                <option value="G6">G6</option>
                                <option value="G7">G7</option>
                                <option value="G8">G8</option>
                            </optgroup>
                        </select>
                    </div>
                </div>
                
                <div class="room-details-container" id="room-details">
                    <div class="placeholder-message">Pilih ruangan untuk melihat detail</div>
                    <!-- Room details will be loaded here dynamically -->
                </div>
            </section>
            
            <!-- Predictive Analysis -->
            <section class="predictive-section">
                <div class="section-header">
                    <h2>Analisis Prediktif</h2>
                    <div class="prediction-controls">
                        <select id="prediction-model">
                            <option value="default">Model Default</option>
                            <option value="optimized">Model Optimasi</option>
                            <option value="seasonal">Model Musiman</option>
                        </select>
                        <select id="prediction-timeframe">
                            <option value="6h">6 Jam Kedepan</option>
                            <option value="24h">24 Jam Kedepan</option>
                            <option value="7d">7 Hari Kedepan</option>
                        </select>
                    </div>
                </div>
                
                <div class="prediction-grid">
                    <div class="prediction-card">
                        <h3>Prediksi Suhu</h3>
                        <div class="prediction-chart-container">
                            <canvas id="temperature-prediction-chart"></canvas>
                        </div>
                    </div>
                    <div class="prediction-card">
                        <h3>Prediksi Kelembapan</h3>
                        <div class="prediction-chart-container">
                            <canvas id="humidity-prediction-chart"></canvas>
                        </div>
                    </div>
                    <div class="prediction-card prediction-recommendations">
                        <h3>Rekomendasi Proaktif</h3>
                        <div class="recommendations-list">
                            <div class="recommendation-item">
                                <div class="recommendation-time">16:00 - 20:00</div>
                                <div class="recommendation-content">
                                    <div class="recommendation-title">Antisipasi Kenaikan Kelembapan</div>
                                    <div class="recommendation-description">
                                        Prakiraan hujan akan meningkatkan kelembapan di area G7. Aktifkan dehumidifier mulai pukul 16:00.
                                    </div>
                                </div>
                            </div>
                            <div class="recommendation-item">
                                <div class="recommendation-time">Besok, 06:00 - 10:00</div>
                                <div class="recommendation-content">
                                    <div class="recommendation-title">Antisipasi Peningkatan Suhu</div>
                                    <div class="recommendation-description">
                                        Prakiraan cerah berawan dengan suhu eksternal mencapai 31°C. Persiapkan sistem pendingin di area F5-F6.
                                    </div>
                                </div>
                            </div>
                            <div class="recommendation-item">
                                <div class="recommendation-time">Maintenance</div>
                                <div class="recommendation-content">
                                    <div class="recommendation-title">Jadwal Perawatan Optimal</div>
                                    <div class="recommendation-description">
                                        Waktu optimal untuk perawatan AC adalah hari Rabu, 21 Mei 2025 pukul 10:00-14:00 saat beban sistem minimal.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Automation Controls -->
            <section class="automation-section">
                <div class="section-header">
                    <h2>Kontrol Otomasi</h2>
                    <div class="automation-status">
                        <span class="status-indicator active"></span>
                        <span>Sistem Otomasi Aktif</span>
                    </div>
                </div>
                
                <div class="automation-grid">
                    <div class="automation-card">
                        <h3>Parameter Otomasi</h3>
                        <div class="parameter-list">
                            <div class="parameter-item">
                                <div class="parameter-name">Rentang Suhu Optimal</div>
                                <div class="parameter-value">
                                    <div class="range-slider">
                                        <span class="range-min">18°C</span>
                                        <div class="range-slider-container">
                                            <div class="range-slider-bar"></div>
                                            <div class="range-slider-handle left" data-value="18"></div>
                                            <div class="range-slider-handle right" data-value="20"></div>
                                        </div>
                                        <span class="range-max">20°C</span>
                                    </div>
                                </div>
                            </div>
                            <div class="parameter-item">
                                <div class="parameter-name">Rentang Kelembapan Optimal</div>
                                <div class="parameter-value">
                                    <div class="range-slider">
                                        <span class="range-min">45%</span>
                                        <div class="range-slider-container">
                                            <div class="range-slider-bar"></div>
                                            <div class="range-slider-handle left" data-value="45"></div>
                                            <div class="range-slider-handle right" data-value="55"></div>
                                        </div>
                                        <span class="range-max">55%</span>
                                    </div>
                                </div>
                            </div>
                            <div class="parameter-item">
                                <div class="parameter-name">Sensitivitas Respons</div>
                                <div class="parameter-value">
                                    <select id="response-sensitivity">
                                        <option value="low">Rendah (Respons Lambat)</option>
                                        <option value="medium" selected>Medium (Seimbang)</option>
                                        <option value="high">Tinggi (Respons Cepat)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="parameter-item">
                                <div class="parameter-name">Mode Operasi</div>
                                <div class="parameter-value">
                                    <select id="operation-mode">
                                        <option value="eco">Eco (Hemat Energi)</option>
                                        <option value="balanced" selected>Seimbang</option>
                                        <option value="preservation">Preservasi (Prioritas Arsip)</option>
                                        <option value="custom">Kustom</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="parameter-actions">
                            <button class="primary-btn">Simpan Parameter</button>
                            <button class="secondary-btn">Reset ke Default</button>
                        </div>
                    </div>
                    
                    <div class="automation-card device-control">
                        <h3>Kontrol Perangkat</h3>
                        <div class="device-grid">
                            <div class="device-category">
                                <h4>Sistem Pendingin</h4>
                                <div class="device-list">
                                    <div class="device-item">
                                        <div class="device-name">AC Lantai F</div>
                                        <div class="device-control">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="ac-f-toggle" checked>
                                                <label for="ac-f-toggle"></label>
                                            </div>
                                            <select class="device-mode">
                                                <option value="auto">Auto</option>
                                                <option value="cool">Cool</option>
                                                <option value="dry">Dry</option>
                                                <option value="fan">Fan</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="device-item">
                                        <div class="device-name">AC Lantai G</div>
                                        <div class="device-control">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="ac-g-toggle" checked>
                                                <label for="ac-g-toggle"></label>
                                            </div>
                                            <select class="device-mode">
                                                <option value="auto">Auto</option>
                                                <option value="cool">Cool</option>
                                                <option value="dry">Dry</option>
                                                <option value="fan">Fan</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="device-category">
                                <h4>Pengontrol Kelembapan</h4>
                                <div class="device-list">
                                    <div class="device-item">
                                        <div class="device-name">Dehumidifier G7</div>
                                        <div class="device-control">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="dehum-g7-toggle" checked>
                                                <label for="dehum-g7-toggle"></label>
                                            </div>
                                            <select class="device-mode">
                                                <option value="auto">Auto</option>
                                                <option value="low">Low</option>
                                                <option value="medium">Medium</option>
                                                <option value="high">High</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="device-item">
                                        <div class="device-name">Humidifier F4</div>
                                        <div class="device-control">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="hum-f4-toggle">
                                                <label for="hum-f4-toggle"></label>
                                            </div>
                                            <select class="device-mode" disabled>
                                                <option value="auto">Auto</option>
                                                <option value="low">Low</option>
                                                <option value="medium">Medium</option>
                                                <option value="high">High</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="device-category">
                                <h4>Ventilasi & Sirkulasi</h4>
                                <div class="device-list">
                                    <div class="device-item">
                                        <div class="device-name">Ventilasi Utama</div>
                                        <div class="device-control">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="main-vent-toggle" checked>
                                                <label for="main-vent-toggle"></label>
                                            </div>
                                            <select class="device-mode">
                                                <option value="auto">Auto</option>
                                                <option value="low">Low</option>
                                                <option value="medium">Medium</option>
                                                <option value="high">High</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="automation-card schedule-control">
                        <h3>Jadwal & Skenario</h3>
                        <div class="tab-controls">
                            <button class="tab-btn active" data-tab="schedules">Jadwal</button>
                            <button class="tab-btn" data-tab="scenarios">Skenario</button>
                        </div>
                        
                        <div class="tab-content active" id="schedules-tab">
                            <div class="schedule-list">
                                <div class="schedule-item">
                                    <div class="schedule-time">08:00 - 17:00</div>
                                    <div class="schedule-details">
                                        <div class="schedule-title">Jam Kerja Standar</div>
                                        <div class="schedule-description">Pengaturan optimal untuk preservasi arsip selama aktivitas kantor</div>
                                    </div>
                                    <div class="schedule-status active"></div>
                                </div>
                                <div class="schedule-item">
                                    <div class="schedule-time">17:00 - 08:00</div>
                                    <div class="schedule-details">
                                        <div class="schedule-title">Mode Malam</div>
                                        <div class="schedule-description">Pengaturan hemat energi dengan pemantauan minimal</div>
                                    </div>
                                    <div class="schedule-status active"></div>
                                </div>
                                <div class="schedule-item">
                                    <div class="schedule-time">Sabtu - Minggu</div>
                                    <div class="schedule-details">
                                        <div class="schedule-title">Akhir Pekan</div>
                                        <div class="schedule-description">Penyesuaian untuk gedung minim aktivitas</div>
                                    </div>
                                    <div class="schedule-status active"></div>
                                </div>
                            </div>
                            <button class="primary-btn add-schedule-btn">+ Tambah Jadwal Baru</button>
                        </div>
                        
                        <div class="tab-content" id="scenarios-tab">
                            <div class="scenario-list">
                                <div class="scenario-item">
                                    <div class="scenario-name">Antisipasi Hujan</div>
                                    <div class="scenario-description">Pengaturan untuk mengantisipasi peningkatan kelembapan eksternal</div>
                                    <button class="scenario-btn">Aktifkan</button>
                                </div>
                                <div class="scenario-item">
                                    <div class="scenario-name">Cuaca Panas Ekstrem</div>
                                    <div class="scenario-description">Pengaturan untuk saat suhu eksternal > 32°C</div>
                                    <button class="scenario-btn">Aktifkan</button>
                                </div>
                                <div class="scenario-item">
                                    <div class="scenario-name">Mode Pemeliharaan</div>
                                    <div class="scenario-description">Pengaturan saat sedang ada perawatan sistem</div>
                                    <button class="scenario-btn">Aktifkan</button>
                                </div>
                            </div>
                            <button class="primary-btn add-scenario-btn">+ Tambah Skenario Baru</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <footer>
            <div class="footer-left">
                <p>© 2025 Digital Twin Gedung Arsip</p>
            </div>
            <div class="footer-right">
                <p>Versi 1.0.0 | Status Server: <span class="server-status online">Online</span></p>
            </div>
        </footer>
    </div>

    <script src="js/app.js"></script>
    <script src="js/building-model.js"></script>
    <script src="js/charts.js"></script>
</body>
</html>
